<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task 3 â€” Asynchronous Data Loader | Abdullah Fawad</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Header -->
  <header class="header">
    <div class="header-inner">
      <a href="../index.html" class="back-link">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
      </a>
      <div class="header-brand">
        <h1>Async Data Loader</h1>
        <span class="header-sub">Promises &middot; async/await &middot; Error Handling</span>
      </div>
      <div class="header-right">
        <button class="btn-toggle" id="toggleFailBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
          Simulate Error
        </button>
        <button class="btn-primary" id="refreshBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/></svg>
          Refresh
        </button>
      </div>
    </div>
  </header>

  <!-- Stats -->
  <section class="stats-bar">
    <div class="wrap">
      <div class="stats-grid">
        <div class="stat">
          <div class="stat-icon blue">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
          </div>
          <div><div class="stat-val" id="userCount">&mdash;</div><div class="stat-lbl">Users Loaded</div></div>
        </div>
        <div class="stat">
          <div class="stat-icon purple">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
          </div>
          <div><div class="stat-val" id="loadTime">&mdash;</div><div class="stat-lbl">Load Time</div></div>
        </div>
        <div class="stat">
          <div class="stat-icon" id="statusIcon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
          </div>
          <div><div class="stat-val" id="fetchStatus">Idle</div><div class="stat-lbl">Status</div></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Main -->
  <main class="wrap main-area">
    <div class="data-card">
      <div class="card-top">
        <h2>User Records</h2>
        <span class="badge" id="recordBadge">&mdash;</span>
      </div>

      <!-- Skeleton -->
      <div id="skeleton" class="skeleton-zone">
        <div class="sk-row"><div class="sk w60"></div><div class="sk w80"></div><div class="sk w50"></div><div class="sk w30"></div></div>
        <div class="sk-row"><div class="sk w50"></div><div class="sk w70"></div><div class="sk w60"></div><div class="sk w40"></div></div>
        <div class="sk-row"><div class="sk w70"></div><div class="sk w60"></div><div class="sk w40"></div><div class="sk w50"></div></div>
        <div class="sk-row"><div class="sk w60"></div><div class="sk w80"></div><div class="sk w50"></div><div class="sk w30"></div></div>
        <div class="sk-row"><div class="sk w80"></div><div class="sk w50"></div><div class="sk w70"></div><div class="sk w40"></div></div>
        <div class="sk-row"><div class="sk w50"></div><div class="sk w70"></div><div class="sk w60"></div><div class="sk w30"></div></div>
      </div>

      <!-- Table -->
      <div class="table-scroll" id="tableWrapper" style="display:none">
        <table id="userTable">
          <thead>
            <tr>
              <th>User</th>
              <th>Role</th>
              <th>Email</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- Error state -->
      <div class="error-state" id="errorState" style="display:none">
        <div class="err-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#ff3b30" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
        </div>
        <h3>Failed to load data</h3>
        <p id="errorMsg">An unexpected error occurred.</p>
        <button class="btn-primary" id="retryBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/></svg>
          Try Again
        </button>
      </div>
    </div>
  </main>

  <div class="toast" id="toast"></div>

  <footer class="footer">
    <p>&copy; 2026 Abdullah Fawad &mdash; Full-Stack Programming Lab</p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
